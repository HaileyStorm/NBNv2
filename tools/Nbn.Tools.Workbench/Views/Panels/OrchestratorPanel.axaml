<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:Nbn.Tools.Workbench.ViewModels"
             x:Class="Nbn.Tools.Workbench.Views.Panels.OrchestratorPanel"
             x:DataType="vm:OrchestratorPanelViewModel">
  <ScrollViewer HorizontalScrollBarVisibility="Disabled">
    <StackPanel Spacing="16">
      <Border Classes="card">
        <StackPanel Spacing="10">
          <TextBlock Text="Endpoints" Classes="card-title" />
          <Grid ColumnDefinitions="Auto,*,Auto,*,Auto,*" RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto,Auto" ColumnSpacing="12" RowSpacing="6">
            <TextBlock Text="IO Host" Classes="muted" />
            <TextBox Grid.Column="1" Text="{Binding Connections.IoHost}" Width="160" />
            <TextBlock Grid.Column="2" Text="IO Port" Classes="muted" />
            <TextBox Grid.Column="3" Text="{Binding Connections.IoPortText}" Width="90" />
            <TextBlock Grid.Column="4" Text="Gateway" Classes="muted" />
            <TextBox Grid.Column="5" Text="{Binding Connections.IoGateway}" Width="140" />

            <TextBlock Grid.Row="1" Text="Obs Host" Classes="muted" />
            <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding Connections.ObsHost}" Width="160" />
            <TextBlock Grid.Row="1" Grid.Column="2" Text="Obs Port" Classes="muted" />
            <TextBox Grid.Row="1" Grid.Column="3" Text="{Binding Connections.ObsPortText}" Width="90" />
            <TextBlock Grid.Row="1" Grid.Column="4" Text="Debug Hub" Classes="muted" />
            <TextBox Grid.Row="1" Grid.Column="5" Text="{Binding Connections.DebugHub}" Width="140" />

            <TextBlock Grid.Row="2" Text="HiveMind Host" Classes="muted" />
            <TextBox Grid.Row="2" Grid.Column="1" Text="{Binding Connections.HiveMindHost}" Width="160" />
            <TextBlock Grid.Row="2" Grid.Column="2" Text="HiveMind Port" Classes="muted" />
            <TextBox Grid.Row="2" Grid.Column="3" Text="{Binding Connections.HiveMindPortText}" Width="90" />
            <TextBlock Grid.Row="2" Grid.Column="4" Text="HiveMind Name" Classes="muted" />
            <TextBox Grid.Row="2" Grid.Column="5" Text="{Binding Connections.HiveMindName}" Width="140" />

            <TextBlock Grid.Row="3" Text="Settings Host" Classes="muted" />
            <TextBox Grid.Row="3" Grid.Column="1" Text="{Binding Connections.SettingsHost}" Width="160" />
            <TextBlock Grid.Row="3" Grid.Column="2" Text="Settings Port" Classes="muted" />
            <TextBox Grid.Row="3" Grid.Column="3" Text="{Binding Connections.SettingsPortText}" Width="90" />
            <TextBlock Grid.Row="3" Grid.Column="4" Text="Settings Name" Classes="muted" />
            <TextBox Grid.Row="3" Grid.Column="5" Text="{Binding Connections.SettingsName}" Width="140" />

            <TextBlock Grid.Row="4" Text="Repro Host" Classes="muted" />
            <TextBox Grid.Row="4" Grid.Column="1" Text="{Binding Connections.ReproHost}" Width="160" />
            <TextBlock Grid.Row="4" Grid.Column="2" Text="Repro Port" Classes="muted" />
            <TextBox Grid.Row="4" Grid.Column="3" Text="{Binding Connections.ReproPortText}" Width="90" />
            <TextBlock Grid.Row="4" Grid.Column="4" Text="Manager" Classes="muted" />
            <TextBox Grid.Row="4" Grid.Column="5" Text="{Binding Connections.ReproManager}" Width="140" />

            <TextBlock Grid.Row="5" Text="Worker Host" Classes="muted" />
            <TextBox Grid.Row="5" Grid.Column="1" Text="{Binding Connections.WorkerHost}" Width="160" />
            <TextBlock Grid.Row="5" Grid.Column="2" Text="Worker Port" Classes="muted" />
            <TextBox Grid.Row="5" Grid.Column="3" Text="{Binding Connections.WorkerPortText}" Width="90" />
            <TextBlock Grid.Row="5" Grid.Column="4" Text="Worker Root" Classes="muted" />
            <TextBox Grid.Row="5" Grid.Column="5" Text="{Binding Connections.WorkerRootName}" Width="140" />

            <TextBlock Grid.Row="6" Text="Worker Logical" Classes="muted" />
            <TextBox Grid.Row="6" Grid.Column="1" Text="{Binding Connections.WorkerLogicalName}" Width="160" />
            <TextBlock Grid.Row="6" Grid.Column="4" Text="Viz Hub" Classes="muted" />
            <TextBox Grid.Row="6" Grid.Column="5" Text="{Binding Connections.VizHub}" Width="140" />
          </Grid>

          <WrapPanel>
            <StackPanel Spacing="4" Width="170" Margin="0,0,16,10">
              <Border Classes="chip"
                      Background="{Binding Connections.IoChipBackground}"
                      BorderBrush="{Binding Connections.IoChipBorder}">
                <TextBlock Text="{Binding Connections.IoStatusLabel}" />
              </Border>
              <TextBlock Text="{Binding Connections.IoStatus}" Classes="muted" TextWrapping="Wrap" />
            </StackPanel>
            <StackPanel Spacing="4" Width="170" Margin="0,0,16,10">
              <Border Classes="chip"
                      Background="{Binding Connections.ObsChipBackground}"
                      BorderBrush="{Binding Connections.ObsChipBorder}">
                <TextBlock Text="{Binding Connections.ObsStatusLabel}" />
              </Border>
              <TextBlock Text="{Binding Connections.ObsStatus}" Classes="muted" TextWrapping="Wrap" />
            </StackPanel>
            <StackPanel Spacing="4" Width="170" Margin="0,0,16,10">
              <Border Classes="chip"
                      Background="{Binding Connections.ReproChipBackground}"
                      BorderBrush="{Binding Connections.ReproChipBorder}">
                <TextBlock Text="{Binding Connections.ReproStatusLabel}" />
              </Border>
              <TextBlock Text="{Binding Connections.ReproStatus}" Classes="muted" TextWrapping="Wrap" />
            </StackPanel>
            <StackPanel Spacing="4" Width="170" Margin="0,0,16,10">
              <Border Classes="chip"
                      Background="{Binding Connections.WorkerChipBackground}"
                      BorderBrush="{Binding Connections.WorkerChipBorder}">
                <TextBlock Text="{Binding Connections.WorkerStatusLabel}" />
              </Border>
              <TextBlock Text="{Binding Connections.WorkerStatus}" Classes="muted" TextWrapping="Wrap" />
            </StackPanel>
            <StackPanel Spacing="4" Width="170" Margin="0,0,16,10">
              <Border Classes="chip"
                      Background="{Binding Connections.SettingsChipBackground}"
                      BorderBrush="{Binding Connections.SettingsChipBorder}">
                <TextBlock Text="{Binding Connections.SettingsStatusLabel}" />
              </Border>
              <TextBlock Text="{Binding Connections.SettingsStatus}" Classes="muted" TextWrapping="Wrap" />
            </StackPanel>
            <StackPanel Spacing="4" Width="170" Margin="0,0,16,10">
              <Border Classes="chip"
                      Background="{Binding Connections.HiveMindChipBackground}"
                      BorderBrush="{Binding Connections.HiveMindChipBorder}">
                <TextBlock Text="{Binding Connections.HiveMindStatusLabel}" />
              </Border>
              <TextBlock Text="{Binding Connections.HiveMindStatus}" Classes="muted" TextWrapping="Wrap" />
            </StackPanel>
          </WrapPanel>
        </StackPanel>
      </Border>

      <Border Classes="card">
        <StackPanel Spacing="8">
          <TextBlock Text="Local Launch" Classes="card-title" />
          <StackPanel Orientation="Horizontal" Spacing="8">
            <Button Content="Start All" Command="{Binding StartAllCommand}" Classes="accent" />
            <Button Content="Stop All" Command="{Binding StopAllCommand}" />
          </StackPanel>
          <StackPanel Orientation="Horizontal" Spacing="8">
            <Button Content="Spawn Sample Brain" Command="{Binding SpawnSampleBrainCommand}" Classes="accent" />
            <Button Content="Stop Sample Brain" Command="{Binding StopSampleBrainCommand}" />
            <TextBlock Text="{Binding SampleBrainStatus}" Classes="muted" VerticalAlignment="Center" />
          </StackPanel>
          <Grid ColumnDefinitions="Auto,Auto,Auto,Auto,*" RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto" ColumnSpacing="10" RowSpacing="6">
            <TextBlock Text="SettingsMonitor" Classes="muted" />
            <TextBox Grid.Column="1" Text="{Binding Connections.SettingsPortText}" Width="90" />
            <Button Grid.Column="2" Content="Start" Command="{Binding StartSettingsMonitorCommand}" Classes="accent" />
            <Button Grid.Column="3" Content="Stop" Command="{Binding StopSettingsMonitorCommand}" />
            <TextBlock Grid.Column="4" Text="{Binding SettingsLaunchStatus}" Classes="muted" VerticalAlignment="Center" />

            <TextBlock Grid.Row="1" Text="HiveMind" Classes="muted" />
            <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding Connections.HiveMindPortText}" Width="90" />
            <Button Grid.Row="1" Grid.Column="2" Content="Start" Command="{Binding StartHiveMindCommand}" Classes="accent" />
            <Button Grid.Row="1" Grid.Column="3" Content="Stop" Command="{Binding StopHiveMindCommand}" />
            <TextBlock Grid.Row="1" Grid.Column="4" Text="{Binding HiveMindLaunchStatus}" Classes="muted" VerticalAlignment="Center" />

            <TextBlock Grid.Row="2" Text="IO Gateway" Classes="muted" />
            <TextBox Grid.Row="2" Grid.Column="1" Text="{Binding Connections.IoPortText}" Width="90" />
            <Button Grid.Row="2" Grid.Column="2" Content="Start" Command="{Binding StartIoCommand}" Classes="accent" />
            <Button Grid.Row="2" Grid.Column="3" Content="Stop" Command="{Binding StopIoCommand}" />
            <TextBlock Grid.Row="2" Grid.Column="4" Text="{Binding IoLaunchStatus}" Classes="muted" VerticalAlignment="Center" />

            <TextBlock Grid.Row="3" Text="Reproduction" Classes="muted" />
            <TextBox Grid.Row="3" Grid.Column="1" Text="{Binding Connections.ReproPortText}" Width="90" />
            <Button Grid.Row="3" Grid.Column="2" Content="Start" Command="{Binding StartReproCommand}" Classes="accent" />
            <Button Grid.Row="3" Grid.Column="3" Content="Stop" Command="{Binding StopReproCommand}" />
            <TextBlock Grid.Row="3" Grid.Column="4" Text="{Binding ReproLaunchStatus}" Classes="muted" VerticalAlignment="Center" />

            <TextBlock Grid.Row="4" Text="Observability" Classes="muted" />
            <TextBox Grid.Row="4" Grid.Column="1" Text="{Binding Connections.ObsPortText}" Width="90" />
            <Button Grid.Row="4" Grid.Column="2" Content="Start" Command="{Binding StartObsCommand}" Classes="accent" />
            <Button Grid.Row="4" Grid.Column="3" Content="Stop" Command="{Binding StopObsCommand}" />
            <TextBlock Grid.Row="4" Grid.Column="4" Text="{Binding ObsLaunchStatus}" Classes="muted" VerticalAlignment="Center" />

            <TextBlock Grid.Row="5" Text="Worker Node" Classes="muted" />
            <TextBox Grid.Row="5" Grid.Column="1" Text="{Binding Connections.WorkerPortText}" Width="90" />
            <Button Grid.Row="5" Grid.Column="2" Content="Start" Command="{Binding StartWorkerCommand}" Classes="accent" />
            <Button Grid.Row="5" Grid.Column="3" Content="Stop" Command="{Binding StopWorkerCommand}" />
            <TextBlock Grid.Row="5" Grid.Column="4" Text="{Binding WorkerLaunchStatus}" Classes="muted" VerticalAlignment="Center" />
          </Grid>
          <StackPanel Orientation="Horizontal" Spacing="10">
            <CheckBox Content="Workbench logging" IsChecked="{Binding Connections.WorkbenchLoggingEnabled}" />
            <TextBlock Text="{Binding Connections.WorkbenchLogPath}" Classes="muted" VerticalAlignment="Center" />
          </StackPanel>
        </StackPanel>
      </Border>

      <StackPanel Spacing="16">
        <Grid ColumnDefinitions="*,*" ColumnSpacing="16">
          <Border Classes="card" Grid.Column="0">
            <StackPanel Spacing="8">
              <TextBlock Text="Nodes" Classes="card-title" />
              <ScrollViewer MaxHeight="320" HorizontalScrollBarVisibility="Disabled">
                <ItemsControl ItemsSource="{Binding Nodes}">
                  <ItemsControl.ItemTemplate>
                    <DataTemplate>
                      <Border Classes="row">
                        <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="8">
                          <Border Classes="pill"
                                  Background="{Binding StatusChipBackground}"
                                  BorderBrush="{Binding StatusChipBorder}"
                                  BorderThickness="1">
                            <TextBlock Text="{Binding Status}" Foreground="{Binding StatusChipForeground}" />
                          </Border>
                          <StackPanel Grid.Column="1">
                            <TextBlock Text="{Binding LogicalName}" Classes="row-title" />
                            <TextBlock Text="{Binding Address}" Classes="muted" />
                            <TextBlock Text="{Binding RootActor}" Classes="muted" />
                          </StackPanel>
                          <TextBlock Grid.Column="2" Text="{Binding LastSeen}" Classes="muted" HorizontalAlignment="Right" />
                        </Grid>
                      </Border>
                    </DataTemplate>
                  </ItemsControl.ItemTemplate>
                </ItemsControl>
              </ScrollViewer>
            </StackPanel>
          </Border>

          <Border Classes="card" Grid.Column="1">
            <StackPanel Spacing="8">
              <TextBlock Text="Hosted Actors" Classes="card-title" />
              <ScrollViewer MaxHeight="320" HorizontalScrollBarVisibility="Disabled">
                <ItemsControl ItemsSource="{Binding Actors}">
                  <ItemsControl.ItemTemplate>
                    <DataTemplate>
                      <Border Classes="row">
                        <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="8">
                          <Border Classes="pill"
                                  Background="{Binding StatusChipBackground}"
                                  BorderBrush="{Binding StatusChipBorder}"
                                  BorderThickness="1">
                            <TextBlock Text="{Binding Status}" Foreground="{Binding StatusChipForeground}" />
                          </Border>
                          <StackPanel Grid.Column="1">
                            <TextBlock Text="{Binding LogicalName}" Classes="row-title" />
                            <TextBlock Text="{Binding Address}" Classes="muted" />
                            <TextBlock Text="{Binding RootActor}" Classes="muted" />
                          </StackPanel>
                          <TextBlock Grid.Column="2" Text="{Binding LastSeen}" Classes="muted" HorizontalAlignment="Right" />
                        </Grid>
                      </Border>
                    </DataTemplate>
                  </ItemsControl.ItemTemplate>
                </ItemsControl>
              </ScrollViewer>
            </StackPanel>
          </Border>
        </Grid>

        <Border Classes="card">
          <StackPanel Spacing="8">
            <Grid ColumnDefinitions="*,Auto" ColumnSpacing="10">
              <TextBlock Text="Settings" Classes="card-title" />
              <Button Grid.Column="1" Content="Apply" Command="{Binding ApplySettingsCommand}" Classes="accent" />
            </Grid>
            <ScrollViewer MaxHeight="380" HorizontalScrollBarVisibility="Disabled">
              <ItemsControl ItemsSource="{Binding Settings}">
                <ItemsControl.ItemsPanel>
                  <ItemsPanelTemplate>
                    <UniformGrid Columns="2" />
                  </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                  <DataTemplate>
                    <Border Classes="row" Margin="6,4">
                      <Grid ColumnDefinitions="*,Auto" RowDefinitions="Auto,Auto" ColumnSpacing="12" RowSpacing="6">
                        <TextBlock Text="{Binding Key}" Classes="row-title" TextWrapping="Wrap" />
                        <TextBlock Grid.Column="1" Text="{Binding Updated}" Classes="muted" VerticalAlignment="Center" />
                        <TextBox Grid.Row="1" Grid.ColumnSpan="2" Text="{Binding Value}" />
                      </Grid>
                    </Border>
                  </DataTemplate>
                </ItemsControl.ItemTemplate>
              </ItemsControl>
            </ScrollViewer>
          </StackPanel>
        </Border>
      </StackPanel>
    </StackPanel>
  </ScrollViewer>
</UserControl>
